// Copyright (C) 2022-2024 Frederick Clausen II
// This file is part of acarshub <https://github.com/sdr-enthusiasts/docker-acarshub>.

// acarshub is free software: you can redistribute it and/or modify
// it under the terms of the GNU General Public License as published by
// the Free Software Foundation, either version 3 of the License, or
// (at your option) any later version.

// acarshub is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
// GNU General Public License for more details.

// You should have received a copy of the GNU General Public License
// along with acarshub.  If not, see <http://www.gnu.org/licenses/>.

@use "colors" as colors;

// Theme system using CSS custom properties
// This allows dynamic theme switching without rebuilding CSS

// Light theme (default and explicit)
:root,
[data-theme="light"] {
  --body-bg: #{colors.$body-bg};
  --body-text: #{colors.$text-color};
  --pre-bg: #{colors.$pre};
  --pre-text: #{colors.$pre-color};
  --pre-border: #{colors.$pre-border};
  --message-bg: #{colors.$catppuccin-latte-mantle};
  --grey-bg: #{colors.$full-white};
  --grey-highlight: #{colors.$grey-highlight};
  --header-text: #{colors.$full-black};
  --hover-text: #{colors.$full-black};

  // Semantic colors for light theme
  --color-red: #d20f39;
  --color-orange: #fe640b;
  --color-green: #40a02b;
  --color-yellow: #df8e1d;
  --color-brown: #8c6d3f;
  --color-darkgreen: #179299;
  --color-white: #{colors.$catppuccin-latte-base};
  --color-black: #{colors.$catppuccin-latte-text};
  --color-blue: #{colors.$blue-highlight};
  --airplane-stroke: #{colors.$catppuccin-latte-text};

  // Background and border colors
  --bg-grey: #{colors.$grey-bg};
  --bg-datablock: #{colors.$datablock-bg};
  --bg-mapbackground: #{colors.$catppuccin-latte-surface1};
  --border-datablock: #{colors.$catppuccin-latte-overlay0};
  --border-black: #{colors.$catppuccin-latte-crust};
  --border-grey: #{colors.$catppuccin-latte-surface0};

  // Text colors
  --text-creamy-white: #{colors.$catppuccin-latte-mantle};
  --text-light-white: #{colors.$catppuccin-latte-base};
  --text-egg-white: #{colors.$catppuccin-latte-mantle};

  // Shadow and effects
  --shadow-mostly-transparent: rgba(
    #{red(colors.$catppuccin-latte-crust)},
    #{green(colors.$catppuccin-latte-crust)},
    #{blue(colors.$catppuccin-latte-crust)},
    0.2
  );
  --shadow-jbox: rgba(
    #{red(colors.$catppuccin-latte-crust)},
    #{green(colors.$catppuccin-latte-crust)},
    #{blue(colors.$catppuccin-latte-crust)},
    0.25
  );
  --nav-text-shadow: #{colors.$nav-text-shadow};
  --tabs-grey-shadow: #{colors.$catppuccin-latte-overlay1};
  --stat-border: #{colors.$catppuccin-latte-surface2};

  // Modal colors for light theme
  --modal-title-bg: #{colors.$blue-highlight};
  --modal-title-text: #{colors.$catppuccin-base};
  --modal-content-bg: #{colors.$catppuccin-latte-base};
  --modal-settings-pill-bg: #{colors.$catppuccin-latte-mantle};
  --modal-tab-inactive-bg: #{colors.$catppuccin-latte-surface0};
  --modal-tab-inactive-text: #{colors.$text-color};
  --modal-tab-active-bg: #{colors.$blue-highlight};
  --modal-tab-active-text: #{colors.$catppuccin-base};
  --modal-button-bg: #{colors.$blue-highlight};
  --modal-button-text: #{colors.$catppuccin-base};
  --modal-input-bg: #{colors.$catppuccin-latte-mantle};
  --modal-input-text: #{colors.$text-color};
  --modal-label-text: #{colors.$text-color};
  --modal-border: #{colors.$datablock-border};
}

// Dark theme - manual override
[data-theme="dark"] {
  --body-bg: #{colors.$catppuccin-mocha-base};
  --body-text: #{colors.$catppuccin-mocha-subtext1};
  --pre-bg: #{colors.$catppuccin-mocha-surface0};
  --pre-text: #{colors.$catppuccin-mocha-subtext1};
  --pre-border: #{colors.$catppuccin-mocha-mantle};
  --message-bg: #{colors.$catppuccin-mocha-surface0};
  --grey-bg: #{colors.$catppuccin-mocha-surface0};
  --grey-highlight: #{colors.$catppuccin-mocha-overlay2};
  --header-text: #{colors.$catppuccin-mocha-subtext1};
  --hover-text: #{colors.$catppuccin-mocha-text};

  // Semantic colors for dark theme
  --color-red: #{colors.$catppuccin-red};
  --color-orange: #{colors.$catppuccin-peach};
  --color-green: #{colors.$catppuccin-green};
  --color-yellow: #{colors.$catppuccin-yellow};
  --color-brown: #{colors.$catppuccin-maroon};
  --color-darkgreen: #{colors.$catppuccin-teal};
  --color-white: #{colors.$catppuccin-mocha-text};
  --color-black: #{colors.$catppuccin-mocha-text};
  --color-blue: #{colors.$blue-highlight};
  --airplane-stroke: #{colors.$catppuccin-black};

  // Background and border colors
  --bg-grey: #{colors.$catppuccin-mocha-surface0};
  --bg-datablock: rgba(
    #{red(colors.$catppuccin-mocha-surface1)},
    #{green(colors.$catppuccin-mocha-surface1)},
    #{blue(colors.$catppuccin-mocha-surface1)},
    0.9
  );
  --bg-mapbackground: #{colors.$catppuccin-mocha-surface1};
  --border-datablock: #{colors.$catppuccin-mocha-overlay0};
  --border-black: #{colors.$catppuccin-mocha-crust};
  --border-grey: #{colors.$catppuccin-mocha-surface0};

  // Text colors
  --text-creamy-white: #{colors.$catppuccin-mocha-subtext1};
  --text-light-white: #{colors.$catppuccin-mocha-text};
  --text-egg-white: #{colors.$catppuccin-mocha-subtext1};

  // Shadow and effects
  --shadow-mostly-transparent: rgba(
    #{red(colors.$catppuccin-mocha-crust)},
    #{green(colors.$catppuccin-mocha-crust)},
    #{blue(colors.$catppuccin-mocha-crust)},
    0.2
  );
  --shadow-jbox: rgba(
    #{red(colors.$catppuccin-mocha-crust)},
    #{green(colors.$catppuccin-mocha-crust)},
    #{blue(colors.$catppuccin-mocha-crust)},
    0.25
  );
  --nav-text-shadow: #{colors.$nav-text-shadow};
  --tabs-grey-shadow: #{colors.$catppuccin-mocha-overlay1};
  --stat-border: #{colors.$catppuccin-mocha-surface2};

  // Modal colors for dark theme (Catppuccin Mocha)
  --modal-title-bg: #{colors.$blue-highlight};
  --modal-title-text: #{colors.$catppuccin-mocha-base};
  --modal-content-bg: #{colors.$catppuccin-mocha-base};
  --modal-settings-pill-bg: #{colors.$catppuccin-mocha-surface0};
  --modal-tab-inactive-bg: #{colors.$catppuccin-mocha-surface0};
  --modal-tab-inactive-text: #{colors.$catppuccin-mocha-text};
  --modal-tab-active-bg: #{colors.$blue-highlight};
  --modal-tab-active-text: #{colors.$catppuccin-mocha-base};
  --modal-button-bg: #{colors.$blue-highlight};
  --modal-button-text: #{colors.$catppuccin-mocha-base};
  --modal-input-bg: #{colors.$catppuccin-mocha-surface0};
  --modal-input-text: #{colors.$catppuccin-mocha-text};
  --modal-label-text: #{colors.$blue-highlight};
  --modal-border: #{colors.$catppuccin-mocha-overlay0};
}

// Dark theme - system preference (only when no manual preference set)
@media (prefers-color-scheme: dark) {
  :root:not([data-theme]) {
    --body-bg: #{colors.$catppuccin-mocha-base};
    --body-text: #{colors.$catppuccin-mocha-subtext1};
    --pre-bg: #{colors.$catppuccin-mocha-surface0};
    --pre-text: #{colors.$catppuccin-mocha-subtext1};
    --pre-border: #{colors.$catppuccin-mocha-mantle};
    --message-bg: #{colors.$catppuccin-mocha-surface0};
    --grey-bg: #{colors.$catppuccin-mocha-surface0};
    --grey-highlight: #{colors.$catppuccin-mocha-overlay2};
    --header-text: #{colors.$catppuccin-mocha-subtext1};
    --hover-text: #{colors.$catppuccin-mocha-text};

    // Semantic colors for dark theme
    --color-red: #{colors.$catppuccin-red};
    --color-orange: #{colors.$catppuccin-peach};
    --color-green: #{colors.$catppuccin-green};
    --color-yellow: #{colors.$catppuccin-yellow};
    --color-brown: #{colors.$catppuccin-maroon};
    --color-darkgreen: #{colors.$catppuccin-teal};
    --color-white: #{colors.$catppuccin-mocha-text};
    --color-black: #{colors.$catppuccin-mocha-text};
    --color-blue: #{colors.$blue-highlight};
    --airplane-stroke: #{colors.$catppuccin-black};

    // Background and border colors
    --bg-grey: #{colors.$catppuccin-mocha-surface0};
    --bg-datablock: rgba(
      #{red(colors.$catppuccin-mocha-surface1)},
      #{green(colors.$catppuccin-mocha-surface1)},
      #{blue(colors.$catppuccin-mocha-surface1)},
      0.9
    );
    --bg-mapbackground: #{colors.$catppuccin-mocha-surface1};
    --border-datablock: #{colors.$catppuccin-mocha-overlay0};
    --border-black: #{colors.$catppuccin-mocha-crust};
    --border-grey: #{colors.$catppuccin-mocha-surface0};

    // Text colors
    --text-creamy-white: #{colors.$catppuccin-mocha-subtext1};
    --text-light-white: #{colors.$catppuccin-mocha-text};
    --text-egg-white: #{colors.$catppuccin-mocha-subtext1};

    // Shadow and effects
    --shadow-mostly-transparent: rgba(
      #{red(colors.$catppuccin-mocha-crust)},
      #{green(colors.$catppuccin-mocha-crust)},
      #{blue(colors.$catppuccin-mocha-crust)},
      0.2
    );
    --shadow-jbox: rgba(
      #{red(colors.$catppuccin-mocha-crust)},
      #{green(colors.$catppuccin-mocha-crust)},
      #{blue(colors.$catppuccin-mocha-crust)},
      0.25
    );
    --nav-text-shadow: #{colors.$nav-text-shadow};
    --tabs-grey-shadow: #{colors.$catppuccin-mocha-overlay1};
    --stat-border: #{colors.$catppuccin-mocha-surface2};

    // Modal colors for dark theme (Catppuccin Mocha)
    --modal-title-bg: #{colors.$blue-highlight};
    --modal-title-text: #{colors.$catppuccin-mocha-base};
    --modal-content-bg: #{colors.$catppuccin-mocha-base};
    --modal-settings-pill-bg: #{colors.$catppuccin-mocha-surface0};
    --modal-tab-inactive-bg: #{colors.$catppuccin-mocha-surface0};
    --modal-tab-inactive-text: #{colors.$catppuccin-mocha-text};
    --modal-tab-active-bg: #{colors.$blue-highlight};
    --modal-tab-active-text: #{colors.$catppuccin-mocha-base};
    --modal-button-bg: #{colors.$blue-highlight};
    --modal-button-text: #{colors.$catppuccin-mocha-base};
    --modal-input-bg: #{colors.$catppuccin-mocha-surface0};
    --modal-input-text: #{colors.$catppuccin-mocha-text};
    --modal-label-text: #{colors.$blue-highlight};
    --modal-border: #{colors.$catppuccin-mocha-overlay0};
  }
}
