/**
 * Mock Message Fixtures for Integration Testing (Phase 10.2)
 *
 * These are hand-crafted examples in Socket.IO `acars_msg` event format
 * (post-backend processing). They cover common scenarios and edge cases.
 *
 * NOT for E2E tests - see tests/fixtures/*.jsonl for real-world data.
 */

import type { AcarsMsg } from "@acarshub/types";

/**
 * Simple ACARS text message
 */
export const simpleAcarsMessage: AcarsMsg = {
  uid: "test-msg-001",
  station_id: "TEST-ACARS",
  toaddr: "AARINC",
  fromaddr: "N12345",
  depa: "KSFO",
  dsta: "KJFK",
  eta: "2145",
  gtout: "",
  gtin: "",
  wloff: "",
  wlin: "",
  lat: 37.7749,
  lon: -122.4194,
  alt: 35000,
  text: "POSITION REPORT - OVER BROAK",
  tail: "N12345",
  flight: "UAL123",
  icao: 11256099, // 0xABC123
  freq: 131.55,
  ack: "!",
  mode: "2",
  label: "H1",
  block_id: "1",
  msgno: "M45A",
  is_response: 0,
  is_onground: 0,
  error: 0,
  libacars: undefined,
  level: -10,
  timestamp: 1704128400, // 2024-01-01 17:00:00 UTC = 5:00:00 PM
  message_type: "ACARS",
  icao_hex: "ABC123",
  matched: false,
  matched_text: [],
  duplicates: "",
  msgno_parts: "",
  airline: "United Airlines",
  iata_flight: "UA123",
  icao_flight: "UAL123",
  flight_number: "123",
};

/**
 * Multi-part message sequence (3 parts)
 */
export const multiPartMessages: AcarsMsg[] = [
  {
    uid: "test-msg-mp1",
    station_id: "TEST-ACARS",
    toaddr: "AARINC",
    fromaddr: "N67890",
    depa: "KJFK",
    dsta: "EGLL",
    eta: "",
    gtout: "",
    gtin: "",
    wloff: "",
    wlin: "",
    lat: undefined,
    lon: undefined,
    alt: undefined,
    text: "PART 1: LONG MESSAGE TEXT THAT REQUIRES MULTIPLE PARTS",
    tail: "N67890",
    flight: "DAL456",
    icao: 14644310, // 0xDEF456
    freq: 131.55,
    ack: "!",
    mode: "2",
    label: "H1",
    block_id: "2",
    msgno: "M01A", // First part
    is_response: 0,
    is_onground: 0,
    error: 0,
    libacars: undefined,
    level: -15.2,
    timestamp: 1704067210,
    message_type: "ACARS",
    icao_hex: "DEF456",
    matched: false,
    matched_text: [],
    duplicates: "",
    msgno_parts: "",
    airline: "Delta Air Lines",
    iata_flight: "DL456",
    icao_flight: "DAL456",
  },
  {
    uid: "test-msg-mp2",
    station_id: "TEST-ACARS",
    toaddr: "AARINC",
    fromaddr: "N67890",
    depa: "KJFK",
    dsta: "EGLL",
    eta: "",
    gtout: "",
    gtin: "",
    wloff: "",
    wlin: "",
    lat: undefined,
    lon: undefined,
    alt: undefined,
    text: " CONTINUED FROM PART 1 WITH MORE DATA",
    tail: "N67890",
    flight: "DAL456",
    icao: 14644310, // 0xDEF456
    freq: 131.55,
    ack: "!",
    mode: "2",
    label: "H1",
    block_id: "2",
    msgno: "M02A", // Second part
    is_response: 0,
    is_onground: 0,
    error: 0,
    libacars: undefined,
    level: -14.8,
    timestamp: 1704067212,
    message_type: "ACARS",
    icao_hex: "DEF456",
    matched: false,
    matched_text: [],
    duplicates: "",
    msgno_parts: "",
    airline: "Delta Air Lines",
    iata_flight: "DL456",
    icao_flight: "DAL456",
  },
  {
    uid: "test-msg-mp3",
    station_id: "TEST-ACARS",
    toaddr: "AARINC",
    fromaddr: "N67890",
    depa: "KJFK",
    dsta: "EGLL",
    eta: "",
    gtout: "",
    gtin: "",
    wloff: "",
    wlin: "",
    lat: undefined,
    lon: undefined,
    alt: undefined,
    text: " AND FINAL PART OF THE MESSAGE",
    tail: "N67890",
    flight: "DAL456",
    icao: 14644310, // 0xDEF456
    freq: 131.55,
    ack: "!",
    mode: "2",
    label: "H1",
    block_id: "2",
    msgno: "M03A", // Third part
    is_response: 0,
    is_onground: 0,
    error: 0,
    libacars: undefined,
    level: -15.0,
    timestamp: 1704067214,
    message_type: "ACARS",
    icao_hex: "DEF456",
    matched: false,
    matched_text: [],
    duplicates: "",
    msgno_parts: "",
    airline: "Delta Air Lines",
    iata_flight: "DL456",
    icao_flight: "DAL456",
  },
];

/**
 * Message with libacars CPDLC data
 */
export const libacarsMessage: AcarsMsg = {
  uid: "test-msg-libacars",
  station_id: "TEST-VDLM",
  toaddr: "AARINC",
  fromaddr: "N55555",
  depa: "KORD",
  dsta: "KATL",
  eta: "",
  gtout: "",
  gtin: "",
  wloff: "",
  wlin: "",
  lat: undefined,
  lon: undefined,
  alt: undefined,
  text: "",
  tail: "N55555",
  flight: "AAL789",
  icao: 10581136, // Example ICAO
  freq: 136.65,
  ack: "!",
  mode: "2",
  label: "B6",
  block_id: "3",
  msgno: "D12A",
  is_response: 0,
  is_onground: 0,
  error: 0,
  libacars:
    '{"cpdlc":{"atc_downlink":{"header":"CPDLC Message","msg_data":{"text":"CLEARED TO FL350"}}}}',
  level: -18.3,
  timestamp: 1704067300,
  message_type: "VDLM2",
  icao_hex: "GHI789",
  matched: false,
  matched_text: [],
  duplicates: "",
  msgno_parts: "",
  airline: "American Airlines",
  iata_flight: "AA789",
  icao_flight: "AAL789",
};

/**
 * Alert-triggering message
 */
export const alertMessage: AcarsMsg = {
  uid: "test-msg-alert",
  station_id: "TEST-ACARS",
  toaddr: "AARINC",
  fromaddr: "N99999",
  depa: "KDEN",
  dsta: "KPHX",
  eta: "",
  gtout: "",
  gtin: "",
  wloff: "",
  wlin: "",
  lat: undefined,
  lon: undefined,
  alt: undefined,
  text: "EMERGENCY - ENGINE FAILURE - REQUESTING IMMEDIATE LANDING",
  tail: "N99999",
  flight: "SWA999",
  icao: 10066329, // 0x999999
  freq: 131.55,
  ack: "!",
  mode: "2",
  label: "H1",
  block_id: "4",
  msgno: "S99A",
  is_response: 0,
  is_onground: 0,
  error: 0,
  libacars: undefined,
  level: -10.2,
  timestamp: 1704067400,
  message_type: "ACARS",
  icao_hex: "JKL999",
  matched: true,
  matched_text: ["EMERGENCY"],
  duplicates: "",
  msgno_parts: "",
  airline: "Southwest Airlines",
  iata_flight: "WN999",
  icao_flight: "SWA999",
};

/**
 * Duplicate message (for dup detection testing)
 */
export const duplicateMessage: AcarsMsg = {
  uid: "test-msg-dup",
  station_id: "TEST-ACARS",
  toaddr: "AARINC",
  fromaddr: "N12345",
  depa: "KSFO",
  dsta: "KLAX",
  eta: "2145",
  gtout: "",
  gtin: "",
  wloff: "",
  wlin: "",
  lat: 37.6213,
  lon: -122.379,
  alt: 35000,
  text: "POSITION REPORT - OVER BROAK", // Same as simpleAcarsMessage
  tail: "N12345",
  flight: "UAL123",
  icao: 11256099, // 0xABC123
  freq: 131.55,
  ack: "!",
  mode: "2",
  label: "H1",
  block_id: "1",
  msgno: "M45A",
  is_response: 0,
  is_onground: 1,
  error: 0,
  libacars: undefined,
  level: -13.1,
  timestamp: 1704067205, // 5 seconds later
  message_type: "ACARS",
  icao_hex: "ABC123",
  matched: false,
  matched_text: [],
  duplicates: "1", // First duplicate
  msgno_parts: "",
  airline: "United Airlines",
  iata_flight: "UA123",
  icao_flight: "UAL123",
};

/**
 * HFDL message
 */
export const hfdlMessage: AcarsMsg = {
  uid: "test-msg-hfdl",
  station_id: "TEST-HFDL",
  toaddr: "AARINC",
  fromaddr: "N77777",
  depa: "EDDF",
  dsta: "KJFK",
  eta: "",
  gtout: "",
  gtin: "",
  wloff: "",
  wlin: "",
  lat: undefined,
  lon: undefined,
  alt: undefined,
  text: "OCEANIC POSITION REPORT",
  tail: "N77777",
  flight: "LH400",
  icao: 13710336, // Example ICAO
  freq: 17.919,
  ack: "!",
  mode: "2",
  label: "H1",
  block_id: "5",
  msgno: "H88A",
  is_response: 0,
  is_onground: 0,
  error: 0,
  libacars: undefined,
  level: -22.5,
  timestamp: 1704067500,
  message_type: "HFDL",
  icao_hex: "MNO777",
  matched: false,
  matched_text: [],
  duplicates: "",
  msgno_parts: "",
  airline: "Lufthansa",
  iata_flight: "LH400",
  icao_flight: "DLH400",
};

/**
 * Empty message (no text or data)
 */
export const emptyMessage: AcarsMsg = {
  uid: "test-msg-empty",
  station_id: "TEST-ACARS",
  toaddr: "AARINC",
  fromaddr: "N44444",
  depa: "",
  dsta: "",
  eta: "",
  gtout: "",
  gtin: "",
  wloff: "",
  wlin: "",
  lat: undefined,
  lon: undefined,
  alt: undefined,
  text: undefined,
  data: undefined,
  decoded_msg: undefined,
  tail: "N44444",
  flight: "FDX888",
  icao: 16579720, // Example ICAO
  freq: 131.55,
  ack: "!",
  mode: "2",
  label: "SQ",
  block_id: "6",
  msgno: "E00A",
  is_response: 0,
  is_onground: 0,
  error: 0,
  libacars: undefined,
  level: -16.8,
  timestamp: 1704067600,
  message_type: "ACARS",
  icao_hex: "PQR444",
  matched: false,
  matched_text: [],
  duplicates: "",
  msgno_parts: "",
  airline: "FedEx",
  iata_flight: "FX888",
  icao_flight: "FDX888",
  flight_number: "888",
};

/**
 * VDLM2 message
 */
export const vdlm2Message: AcarsMsg = {
  uid: "test-msg-vdlm2",
  station_id: "TEST-VDLM",
  toaddr: "AARINC",
  fromaddr: "N33333",
  depa: "LFPG",
  dsta: "EGLL",
  eta: "",
  gtout: "",
  gtin: "",
  wloff: "",
  wlin: "",
  lat: undefined,
  lon: undefined,
  alt: undefined,
  text: "VDLM2 TEST MESSAGE",
  tail: "N22222",
  flight: "ASA321",
  icao: 11223344, // Example ICAO
  freq: 136.975,
  ack: "!",
  mode: "2",
  label: "H1",
  block_id: "7",
  msgno: "V55A",
  is_response: 0,
  is_onground: 0,
  error: 0,
  libacars: undefined,
  level: -19.4,
  timestamp: 1704067700,
  message_type: "VDLM2",
  icao_hex: "STU222",
  matched: false,
  matched_text: [],
  duplicates: "",
  msgno_parts: "",
  airline: "Alaska Airlines",
  iata_flight: "AS321",
  icao_flight: "ASA321",
};

/**
 * All mock messages in a single array
 */
export const allMockMessages: AcarsMsg[] = [
  simpleAcarsMessage,
  ...multiPartMessages,
  libacarsMessage,
  alertMessage,
  duplicateMessage,
  hfdlMessage,
  emptyMessage,
  vdlm2Message,
];

/**
 * Helper to get messages by type
 */
export const mockMessagesByType = {
  acars: [simpleAcarsMessage, alertMessage, duplicateMessage, emptyMessage],
  vdlm2: [vdlm2Message, libacarsMessage],
  hfdl: [hfdlMessage],
  multiPart: multiPartMessages,
  alerts: [alertMessage],
  empty: [emptyMessage],
};
